var t=Object.defineProperty,e=(e,a,s)=>(((e,a,s)=>{a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s})(e,"symbol"!=typeof a?a+"":a,s),s);import{p as a}from"./phaser-cxBNu8M8.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const a of t)if("childList"===a.type)for(const t of a.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const s=class t{static isFps60(){return t.fps.fps60}static isAllowUpdate(){return t.fps.allowUpdate}static isGameOver(){return t.gameOver}static getScaleGame(){return t.scaleGame}static isPausaInicial(){return t.pausa.inicial.activa}static getPausaInicialDuracion(){return t.pausa.inicial.duracion}static isPacmanDies(){return t.pausa.pacmanDies}static isPausaComeFantasma(){return t.pausa.comeFantasma}static isNivelSuperado(){return t.pausa.nivelSuperado}static getPuntos(){return t.puntos}static getNivel(){return t.nivel}static getRecord(){return t.hi}static getVidas(){return t.vidas}static getTxtScore(){return t.txtScore}static getInvisible(){return t.pacman.invisible}static isFantasmasScary(){return t.fantasmasScary.activo}static isFantasmasIntermitente(){return t.fantasmasScary.intermitente}static getFantasmasScaryDuracion(){return t.fantasmasScary.duracion}static getFantasmasBonusInc(){return t.fantasmasBonusInc}static getCerezasIniXY(){return t.cerezasIniXY}static getBonusCerezas(){return t.bonusCerezas}static getCameraControles(){return t.cameraControles}static getCameraScores(){return t.cameraScores}static setFps60(e){t.fps.fps60=e}static setAllowUpdate(e){t.fps.allowUpdate=e}static setNivelSuperado(e){t.pausa.nivelSuperado=e}static setGameOver(e){t.gameOver=e}static setScaleGame(e){t.scaleGame=e}static setPausaInicial(e){t.pausa.inicial.activa=e}static isPacmanDies(e){t.pausa.pacmanDies=e}static isPausaComeFantasma(e){t.pausa.comeFantasma=e}static isNivelSuperado(e){t.pausa.nivelSuperado=e}static setPuntos(e){t.puntos=e}static setNivel(e){t.nivel=e}static setRecord(e){t.hi=e}static setVidas(e){t.vidas=e}static setFantasmasScary(e){t.fantasmasScary.activo=e}static setFantasmasIntermitente(e){t.fantasmasScary.intermitente=e}static setFantasmasScaryDuracion(e){t.fantasmasScary.duracion=e}static setFantasmasBonusInc(e){t.fantasmasBonusInc.contador=e}};e(s,"controlElegido",{mobile:!1,keyboard:!0}),e(s,"screen",{width:864,height:704,escBoundsX:1.35,escBoundsY:1.9}),e(s,"tileXY",{x:16,y:16}),e(s,"scaleGame",4),e(s,"fps",{fps60:!0,allowUpdate:!0}),e(s,"puntos",0),e(s,"nivel",1),e(s,"hi",12e3),e(s,"vidas",3),e(s,"gameOver",!1),e(s,"txtScore","Score: "),e(s,"pausa",{inicial:{activa:!1,duracion:4300},pacmanDies:{activa:!1,duracion:3100},comeFantasma:{activa:!1,duracion:500},nivelSuperado:{activa:!1,duracion:3e3}}),e(s,"pacman",{iniX:9,iniY:4,vel:4,velocity:125,invisible:!1,direccion:{left:[-1,0,180,"left"],right:[1,0,0,"right"],up:[0,-1,270,"up"],down:[0,1,90,"down"]},arrayAcumDir:[],maxArrayAcumDir:50}),e(s,"pacmanPregame",{iniX:-4,iniY:2,vel:4}),e(s,"fantasmasIniXY",{azul:[8,10],rojo:[9,10],verde:[10,10],pink:[9,8]}),e(s,"fantasmasScary",{activo:!1,duracion:9e3,intermitente:!1}),e(s,"fantasmasBonusInc",{puntos:[200,400,800,1600],color:["#f91","#f61","#f41","#f21"],contador:0,duracion:3200}),e(s,"puntitosGordos",{uple:[1,1],upri:[1,17],dole:[16,1],dori:[16,17]}),e(s,"cerezasIniXY",[9,8]),e(s,"bonusCerezas",[300,300,500,800,1e3,2e3,3e3,5e3,5e3,5e3,5e3,5e3,5e3,5e3,5e3]),e(s,"coorCruceta",{xx:60,yy:1400,sizeX:2.5,sizeY:2.1}),e(s,"cameraControles",{x:0,y:s.screen.height-256,ancho:600,alto:400,scrollX:-70,scrollY:-1080}),e(s,"cameraScores",{x:0,y:0,ancho:s.screen.width,alto:34,scrollX:0,scrollY:-90}),e(s,"depth",{fondo:0,puntitos:100,pared:200,item:300,jugador:400,fantasmas:500,efectos:600,marcadores:700,controles:800,textos:900}),e(s,"audio",{numKey:null,key:null});let i=s;class o{constructor(t,e){this.relatedScene=t,this.datos=e}create(){const{x:t,y:e,txt:a,size:s,color:i,style:o,stroke:r,sizeStroke:n,shadowOsx:c,shadowOsy:l,shadowColor:h,bool1:d,bool2:g,origin:u,elastic:m,dura:p}=this.datos;this.texto=this.relatedScene.add.text(t,e,a,{fontSize:s+"px",fill:i,fontFamily:"verdana, arial, sans-serif",fontStyle:o}),this.texto.setOrigin(u[0],u[1]),this.texto.setStroke(r,n),this.texto.setShadow(c,l,h,2,d,g),this.elastic(a,m,p),console.log(this.texto)}elastic(t,e,a){a>0&&this.relatedScene.tweens.add({targets:this.texto,y:e,ease:"Elastic",duration:a})}get(){return this.texto}}class r extends a.Scene{constructor(){super("Boot")}init(){this.txt=new o(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/2),txt:" Touch screen or \n \n click to start... ",size:60,color:"#ffa",style:"bold",stroke:"#fb1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0})}preload(){this.load.image("fondo","assets/img/bg.png")}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.txt.create(),this.input.on("pointerdown",(()=>this.scene.start("Preloader"))),console.log(this.txt)}}class n{constructor(t,e){this.relatedScene=t,this.datos=e}create(){const{x:t,y:e,size:a,txt:s,color:o,strokeColor:r,id:n}=this.datos;let c="";0===n&&(c=`${s}${i.getPuntos()}`),1===n&&(c=`${s}${i.getNivel()}`),2===n&&(c=`${s}${i.getRecord()}`),this.marcador=this.relatedScene.add.text(t,e,c,{fontSize:a+"px",fill:o,fontFamily:"verdana, arial, sans-serif",fontStyle:"bold"}),this.marcador.setStroke(r,16).setShadow(2,2,"#111111",2,!1,!0),console.log(this.marcador)}update(t,e){this.marcador.setText(`${t}${e}`)}get(){return this.marcador}}class c{}e(c,"array_levels",[[[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,1,1,1,1,1,1,1,1,9,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,9,9,1,9,1,9,9,9,1,9,9,1,9],[9,1,9,9,1,9,9,9,1,9,1,9,9,9,1,9,9,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,1,9,9,9,9,9,1,9,1,9,9,1,9],[9,1,1,1,1,9,1,1,1,9,1,1,1,9,1,1,1,1,9],[9,9,9,9,1,9,9,9,1,9,1,9,9,9,1,9,9,9,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,9,9,1,9,1,9,1,9,1,9,1,9,1,9,9,1,9],[9,1,9,9,1,9,1,9,1,9,1,9,1,9,1,9,9,1,9],[9,1,1,1,1,9,1,1,1,1,1,1,1,9,1,1,1,1,9],[9,1,9,9,1,9,1,9,9,9,9,9,1,9,1,9,9,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,18,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,1,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,18,1,1,18,1,18,1,1,1,1],[18,18,18,18,18,18,18,1,18,18,18,1,18,18,18,18,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[18,18,18,1,18,1,18,18,18,18,18,18,18,1,18,1,18,18,18],[1,1,1,1,18,1,18,1,1,1,1,1,18,1,18,1,1,1,1],[1,18,18,18,18,18,18,18,18,1,18,18,18,18,18,18,18,18,1],[1,18,1,1,18,1,1,1,18,1,18,1,1,1,18,1,1,18,1],[1,18,18,1,18,18,18,18,18,18,18,18,18,18,18,1,18,18,1,1],[1,1,18,1,18,1,18,1,1,1,1,1,18,1,18,1,18,1,1],[1,18,18,18,18,1,18,18,18,1,18,18,18,1,18,18,18,18,1],[1,18,1,1,1,1,1,1,18,1,18,1,1,1,1,1,1,18,1],[1,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]]);class l{constructor(t){this.relatedScene=t}create(){const t=i.getNivel();this.tile=this.relatedScene.physics.add.staticGroup();for(let e=0;e<c.array_levels[t].length;e++)for(let a=0;a<c.array_levels[t][0].length;a++){const s=c.array_levels[t][e][a];this.elegir_tilesNiveles(s,t,e,a)}console.log(this.tile)}static check_colision(t,e){const a=i.getNivel();return c.array_levels[a][e][t]<=12}elegir_tilesNiveles(t,e,a,s){const o=i.getScaleGame();t<=12&&this.tile.create(s*i.tileXY.x*o,a*i.tileXY.y*o,"tile-pacman-marron").setScale(i.tileXY.y*o/64)}get(){return this.tile}}function h(t,e){if(console.log(t.body.touching.up,t.body.touching.right,t.body.touching.down,t.body.touching.left),0===t.body.velocity.x&&0===t.body.velocity.y){const e=i.pacman.direccion,a=i.pacman.arrayAcumDir;for(let s=0;s<a.length;s++){const o=e[a[s]][0]*i.pacman.velocity,r=e[a[s]][1]*i.pacman.velocity;t.body.touching[a[s]]||(t.setAngle(e[a[s]][2]),t.setVelocityX(o),t.setVelocityY(r))}}}function d(t,e){!function(t,e){const a=i.getPuntos()+t.getData("puntos");i.setPuntos(a),e.marcadorPtos.update(i.getTxtScore(),i.getPuntos())}(e,this),this.marcadorPtos.update(i.getTxtScore(),i.getPuntos()),e.disableBody(!0,!0),g(this.sonido_waka,!1,.9)}function g(t,e,a){t.volume=a,t.loop=e,t.play()}class u{constructor(t){this.relatedScene=t}create(){const t=i.puntitosGordos,e=[[i.pacman.iniY,i.pacman.iniX],[t.uple],[t.upri],[t.dole],[t.dori],[1,1],[1,17],[16,1],[16,17],[12,0],[12,1],[12,2],[12,3],[12,15],[12,16],[12,17],[12,18],[10,0],[10,18],[8,0],[8,1],[8,2],[8,3],[8,15],[8,16],[8,17],[8,18]],a=i.getScaleGame(),s=i.getNivel();this.puntito=this.relatedScene.physics.add.staticGroup();for(let o=0;o<c.array_levels[s].length;o++)for(let t=0;t<c.array_levels[s][o].length;t++)if(c.array_levels[s][o][t]>12){if(e.some((e=>o===e[0]&&t===e[1])))continue;this.puntito.create(t*i.tileXY.x*a,o*i.tileXY.y*a,"puntito").setScale(.6).setDepth(i.depth.puntitos).setData("puntos",10).refreshBody()}console.log(this.puntito)}get(){return this.puntito}}class m{constructor(t){this.relatedScene=t}create(){const t=i.puntitosGordos,e=i.getScaleGame();this.puntitosgordos=this.relatedScene.physics.add.staticGroup(),Object.keys(t).forEach((a=>{this.puntitosgordos.create(t[a][1]*(i.tileXY.x*e),t[a][0]*(i.tileXY.y*e),"puntito").setData("puntos",50).setScale(1.6).refreshBody()})),this.relatedScene.tweens.add({targets:this.puntitosgordos.getChildren(),scale:.8,tint:new Phaser.Display.Color(255,Phaser.Math.Between(150,255),255).color,yoyo:!0,duration:900,repeat:-1}),this.puntitosgordos.children.iterate((t=>{!function(t,e,a,s,o,r,n,c,l,h){const d=h.add.particles(t,e,"particula1",{speed:50,lifespan:500,scale:{start:.05,end:.2},tint:16777045,blendMode:"ADD"});d.setDepth(i.depth.efectos)}(t.x,t.y,0,0,0,0,0,0,0,this.relatedScene)})),console.log(this.puntitosgordos)}get(){return this.puntitosgordos}}class p{constructor(t){this.relatedScene=t}create(t,e){const a=i.getScaleGame();this.jugador=this.relatedScene.physics.add.sprite(t,e,"pacman"),this.jugador.setCircle(Math.floor(i.tileXY.y*a/2),Math.floor(i.tileXY.x/6),Math.floor(i.tileXY.y/6)),this.jugador.setDepth(i.depth.jugador).setAngle(0),this.jugador.setScale(i.tileXY.y*a/64*.9),this.jugador.setData("intento-giro","right"),this.establecer_velocidad(!0),this.relatedScene.anims.create({key:"le-ri-up-do",frames:this.relatedScene.anims.generateFrameNumbers("pacman",{start:0,end:6}),frameRate:30,yoyo:!0,repeat:-1}),this.relatedScene.anims.create({key:"turn",frames:[{key:"pacman",frame:0}],frameRate:20}),this.jugador.anims.play("le-ri-up-do",!0),this.controles=this.relatedScene.input.keyboard.createCursorKeys(),console.log(this.jugador)}update(){if(!this.jugador.body.enable||i.isPausaComeFantasma()||i.isNivelSuperado())return;const t=i.getScaleGame(),e=i.pacman.direccion;Object.keys(e).forEach((t=>{this.controles[t].isDown&&this.jugador.setData("intento-giro",t),i.controlElegido.mobile&&(this.relatedScene.crucetaup.isDown?this.jugador.setData("intento-giro","up"):this.relatedScene.crucetado.isDown?this.jugador.setData("intento-giro","down"):this.relatedScene.crucetale.isDown?this.jugador.setData("intento-giro","left"):this.relatedScene.crucetari.isDown&&this.jugador.setData("intento-giro","right"))}));const a=i.pacman.direccion[this.jugador.getData("intento-giro")][3];this.jugador.body.touching[a]||this.establecer_velocidad(!1);const s=i.getNivel();this.jugador.x>c.array_levels[s][0].length*(i.tileXY.x*t)&&e[this.jugador.getData("direccion")][0]>0&&(this.jugador.x=-i.tileXY.x*t),this.jugador.x<-i.tileXY.x&&e[this.jugador.getData("direccion")][0]<0&&(this.jugador.x=(c.array_levels[s][0].length-1)*(i.tileXY.x*t))}establecer_velocidad(t){const e=i.pacman.direccion;if(this.jugador.setData("direccion",this.jugador.getData("intento-giro")),this.jugador.setAngle(e[this.jugador.getData("direccion")][2]),i.pacman.arrayAcumDir.unshift(this.jugador.getData("direccion")),t||this.arrayNoMore50(),t)this.relatedScene.time.delayedCall(i.getPausaInicialDuracion(),(()=>{const t=e[this.jugador.getData("direccion")][0]*i.pacman.velocity,a=e[this.jugador.getData("direccion")][1]*i.pacman.velocity;this.jugador.setVelocityX(t),this.jugador.setVelocityY(a)}));else{const t=e[this.jugador.getData("direccion")][0]*i.pacman.velocity,a=e[this.jugador.getData("direccion")][1]*i.pacman.velocity;this.jugador.setVelocityX(t),this.jugador.setVelocityY(a)}}arrayNoMore50(){const t=i.pacman.maxArrayAcumDir;if(i.pacman.arrayAcumDir.length>t+2){const e=i.pacman.arrayAcumDir.length-t;i.pacman.arrayAcumDir.splice(t,e)}}get(){return this.jugador}}class f{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{left:t,top:e}=this.args;this.jugadorshowvidas=this.relatedScene.physics.add.group({key:["pacman"],frameQuantity:i.getVidas(),setXY:{x:t,y:e,stepX:i.tileXY.x*i.getScaleGame()},frame:4}),this.jugadorshowvidas.children.iterate((t=>{t.setOrigin(.5,0).setScale(1,.7).setBlendMode(Phaser.BlendModes.ADD)})),console.log(this.jugadorshowvidas)}get(){return this.jugadorshowvidas}}const y=class t{constructor(t){this.relatedScene=t}create(){const t=i.getScaleGame();this.fantasmas=this.relatedScene.physics.add.group({key:["fantanim0","fantanim1","fantanim2"],frameQuantity:1,setXY:{x:i.fantasmasIniXY.azul[0]*i.tileXY.x*t,y:i.fantasmasIniXY.azul[1]*i.tileXY.y*t,stepX:i.tileXY.x*t}}),this.fantasmas.create(i.fantasmasIniXY.pink[0]*i.tileXY.x*t,i.fantasmasIniXY.pink[1]*i.tileXY.y*t,"fantanim3"),this.fantasmas.children.iterate(((e,a)=>{e.setData("intentoGiro","right"),e.setData("direccion","right"),e.setData("id",a),e.setCircle(Math.floor(i.tileXY.y/2),Math.floor(i.tileXY.x/12),Math.floor(i.tileXY.y/12)),e.setAngle(0).setScale(t).setDepth(i.depth.fantasmas),e.setFrame(0).setFlipX(!1)})),this.fantasmas.children.iterate(((t,e)=>{for(let a=0;a<4;a++)this.relatedScene.anims.create({key:`anim${e}${a}`,frames:this.relatedScene.anims.generateFrameNumbers(`fantanim${e}${a}`,{start:0,end:1}),frameRate:8,yoyo:!0,repeat:-1});t.anims.play(`anim${e}0`,!0)})),console.log(this.fantasmas)}update(){if(!this.relatedScene.jugador.get().body.enable||i.isPausaComeFantasma()||i.isNivelSuperado())return;const e=t.INFO_DIRECCION;this.fantasmas.children.iterate(((a,s)=>{i.isFantasmasScary()&&(a.setTintFill(new Phaser.Display.Color(9,225,255).color),i.isFantasmasIntermitente()&&a.setTint(new Phaser.Display.Color(20,Phaser.Math.Between(60,200),Phaser.Math.Between(125,255)).color));let o,r=0,n=0;const h=i.getScaleGame();for(let e=0;e<t.ptosClave.length;e++){let r=t.ptosClave[e][0]*i.tileXY.x*h,n=t.ptosClave[e][1]*i.tileXY.y*h;a.x==r&&a.y==n&&(o=Phaser.Math.Between(0,10),o<7+i.getNivel()&&(this.fantasma_persigue(a),this.set_flips(a,s)))}if(r=Math.floor((a.x+e[a.getData("direccion")][0]+i.tileXY.x*h*e[a.getData("direccion")][2])/(i.tileXY.x*h)),n=Math.floor((a.y+e[a.getData("direccion")][1]+i.tileXY.y*h*e[a.getData("direccion")][3])/(i.tileXY.y*h)),l.check_colision(r,n))o=Phaser.Math.Between(0,10),o<5+i.getNivel()?this.fantasma_persigue(a):a.setData("direccion",this.elegir_otra_direccion(e,a)),this.set_flips(a,s);else{a.x+=e[a.getData("direccion")][0]*t.VEL,a.y+=e[a.getData("direccion")][1]*t.VEL;const s=i.getNivel();a.x>c.array_levels[s][0].length*(i.tileXY.x*h)&&"right"===a.getData("direccion")&&(a.x=-i.tileXY.x*h),a.x<-i.tileXY.x*h&&"left"===a.getData("direccion")&&(a.x=(c.array_levels[s][0].length-1)*(i.tileXY.x*h))}}))}elegir_otra_direccion(e,a){let s=e[a.getData("direccion")][5];return t.OTRA_DIRECCION_RND[s][Math.floor(3*Math.random())]}fantasma_persigue(t){Phaser.Math.Between(0,10)<5?t.y<this.relatedScene.jugador.get().y?t.setData("direccion","down"):t.setData("direccion","up"):t.x<this.relatedScene.jugador.get().x?t.setData("direccion","right"):t.setData("direccion","left")}set_flips(t,e){"left"===t.getData("direccion")?t.anims.play(`anim${e}1`,!0):"right"===t.getData("direccion")?t.anims.play(`anim${e}0`,!0):"up"===t.getData("direccion")?t.anims.play(`anim${e}2`,!0):"down"===t.getData("direccion")&&t.anims.play(`anim${e}3`,!0)}duracion_scary(){let t=i.getFantasmasScaryDuracion()-900*i.getNivel();return console.log(t),t<1900?1900:t}clear_tint(){this.fantasmas.children.iterate((t=>{t.visible?t.clearTint():(t.setVisible(!0).clearTint(),this.relatedScene.ojos.get().getChildren()[t.getData("id")].setVisible(!1))}))}get(){return this.fantasmas}};e(y,"VEL",2),e(y,"INFO_DIRECCION",{left:[-1,0,0,0,180,"left"],right:[1,0,1,0,0,"right"],up:[0,-1,0,0,270,"up"],down:[0,1,0,1,90,"down"]}),e(y,"OTRA_DIRECCION_RND",{left:["right","up","down"],right:["left","up","down"],up:["right","left","down"],down:["right","left","up"]}),e(y,"ptosClave",[[4,1],[14,1],[4,4],[6,4],[12,4],[14,4],[10,8],[4,10],[6,10],[9,10],[12,10],[14,10],[6,12],[4,14],[6,14],[12,14],[14,14],[4,16],[8,16],[10,16],[14,16],[8,20],[10,20]]);let x=y;class S{constructor(t,e){this.relatedScene=t,this.args=e}create(){i.audio.numKey=this.relatedScene.sound.add("numkey");const{left:t,top:e,id:a,scX:s,scY:r,angle:n,originX:c,originY:l,texto:h,nextScene:d}=this.args;this.boton=this.relatedScene.add.sprite(t,e,a).setInteractive(),this.boton.setScale(s,r).setAngle(1).setDepth(i.depth.botones),this.txt=new o(this.relatedScene,{x:t,y:e,txt:h,size:24,color:"#ff1",style:"bold",stroke:"#1bd",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setDepth(i.depth.botonesTxt).setAlpha(1).setScale(1),this.boton.on("pointerover",(()=>{this.boton.setScale(s+.04,r+.04)})),this.boton.on("pointerout",(()=>{this.boton.setScale(s,r)})),this.boton.on("pointerdown",(t=>{g(i.audio.numKey,!1,.8),this.relatedScene.scene.start(d)})),this.relatedScene.tweens.add({targets:[this.boton,this.txt.get()],angle:359,ease:"Elastic",yoyo:!0,hold:3e3,duration:2e3,repeat:-1})}get(){return this.boton}}class b{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{x:t,y:e,id:a,orX:s,orY:o,scX:r,scY:n,ang:c}=this.args;this.boton=this.relatedScene.add.image(t,e,a).setInteractive(),this.boton.setOrigin(s,o).setScale(r,n),this.boton.setAngle(c).setFrame(0).setDepth(i.depth.botones),this.boton.setX(t).setY(e),this.boton.on("pointerover",(()=>{this.boton.setScale(r+.1,n+.1)})),this.boton.on("pointerout",(()=>{this.boton.setScale(r,n)})),this.boton.on("pointerdown",(()=>{this.relatedScene.scale.isFullscreen?this.relatedScene.scale.stopFullscreen():this.relatedScene.scale.startFullscreen()}))}}class w{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{x:t,y:e,id:a,orX:s,orY:o,scX:r,scY:n,ang:c,alpha:l,texto:h}=this.args;this.boton=this.relatedScene.add.image(t,e,a.slice(0,7)).setInteractive(),this.boton.setOrigin(s,o).setScale(r,n),this.boton.setAngle(c).setDepth(i.depth.controles),this.boton.setX(t).setY(e),this.isDown=!1,this.boton.on("pointerover",(()=>{this.boton.setScale(r+.05,n+.05)})),this.boton.on("pointerout",(()=>{this.boton.setScale(r,n),this.isDown=!1})),this.boton.on("pointerdown",(()=>{console.log(a),this.isDown=!0}))}get(){return this.boton}}class v extends a.Scene{constructor(){super("Game")}init(){i.setGameOver(!1),this.set_pausaInicial(i.getPausaInicialDuracion()),this.laberinto=new l(this),this.puntitos=new u(this),this.puntitosgordos=new m(this),this.jugador=new p(this),this.fantasmas=new x(this),this.instanciar_mobileControls(),this.instanciar_marcadores()}preload(){}create(){this.add.image(0,0,"fondo-pacman").setScale(1.48,1.68).setDepth(i.depth.fondo).setOrigin(0,0),this.set_sonidos(),this.set_cameras(),this.set_cameras_controles(),this.set_cameras_marcadores(),this.laberinto.create(),this.puntitos.create(),this.puntitosgordos.create(),this.jugador.create(i.pacman.iniX*i.tileXY.x*i.getScaleGame(),i.pacman.iniY*i.tileXY.y*i.getScaleGame()),this.fantasmas.create(),this.jugadorshowvidas.create(),this.marcadorPtos.create(),this.marcadorNivel.create(),this.marcadorHi.create(),this.botonfullscreen.create(),this.crucetaup.create(),this.crucetado.create(),this.crucetale.create(),this.crucetari.create(),this.hideMobileControls(),this.cameras.main.startFollow(this.jugador.get()),this.set_colliders()}update(){if(!i.isFps60()){if(i.isAllowUpdate())return void i.setAllowUpdate(!1);i.setAllowUpdate(!0)}i.isPausaInicial()||i.isGameOver()||(this.jugador.update(),this.fantasmas.update())}set_pausaInicial(t){i.setPausaInicial(!0),this.txtpreparado=new o(this,{x:i.pacman.iniX*(i.tileXY.x*i.getScaleGame()),y:0,txt:"Ready!",size:78,color:"#ffa",style:"bold",stroke:"#f81",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:Math.floor(this.sys.game.config.height/2),dura:2800}),this.txtpreparado.create(),this.txtpreparado.get().setDepth(i.depth.textos),this.add.timeline([{at:t,run:()=>{i.setPausaInicial(!1),this.txtpreparado.get().setVisible(!1),this.set_txtGo()}}]).play(),console.log(this.txtpreparado)}set_txtGo(){const t=new o(this,{x:i.pacman.iniX*(i.tileXY.x*i.getScaleGame()),y:Math.floor(this.sys.game.config.height/2),txt:" Go! ",size:90,color:"#ffa",style:"bold",stroke:"#cb1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0});t.create(),t.get().setDepth(i.depth.textos),this.tweens.add({targets:t.get(),alpha:0,duration:1200})}texto_enhorabuena(){this.txtcongrats=new o(this,{x:Math.floor(this.sys.game.config.width/2),y:0,txt:" Congratulations! ",size:70,color:"#ffa",style:"bold",stroke:"#5f1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:this.jugador.get().y-i.tileXY.y,dura:3500}),this.txtcongrats.create(),this.txtcongrats.get().setDepth(i.depth.textos),this.tweens.add({targets:this.txtcongrats.get(),alpha:0,duration:i.pausas.txtCongrats.duracion})}set_colliders(){this.physics.add.collider(this.jugador.get(),this.laberinto.get(),h,null,this),this.physics.add.collider(this.jugador.get(),this.puntitos.get(),d,null,this)}hideMobileControls(){console.log(i.controlElegido),i.controlElegido.mobile||(this.crucetale.get().setVisible(!1),this.crucetari.get().setVisible(!1),this.crucetaup.get().setVisible(!1),this.crucetado.get().setVisible(!1))}set_cameras(){this.cameras.main.setBounds(0,-Math.floor(i.tileXY.y/2),Math.floor(this.sys.game.config.width*i.screen.escBoundsX),Math.floor(this.sys.game.config.height*i.screen.escBoundsY+Math.floor(i.tileXY.y/2))),this.physics.world.setBounds(0,-Math.floor(i.tileXY.y/2),Math.floor(this.sys.game.config.width*i.screen.escBoundsX),Math.floor(this.sys.game.config.height*i.screen.escBoundsY+Math.floor(i.tileXY.y/2)))}set_cameras_controles(){var{x:t,y:e,ancho:a,alto:s,scrollX:o,scrollY:r}=i.getCameraControles();this.mapa_controles=this.cameras.add(t,e,a,s).setZoom(.9).setName("view-controls").setAlpha(1).setOrigin(0,0),this.mapa_controles.scrollX=o,this.mapa_controles.scrollY=r}set_cameras_marcadores(){var{x:t,y:e,ancho:a,alto:s,scrollX:o,scrollY:r}=i.getCameraScores();this.mapa_scores=this.cameras.add(t,e,a,s).setZoom(.6).setName("view-scores").setAlpha(1).setOrigin(0,0),this.mapa_scores.scrollX=o,this.mapa_scores.scrollY=r}instanciar_marcadores(){const t=this.sys.game.config.width;this.sys.game.config.height;this.jugadorshowvidas=new f(this,{left:Math.floor(1.44*t),top:-90}),this.marcadorPtos=new n(this,{x:10,y:-99,size:40,txt:i.getTxtScore(),color:"#fff",strokeColor:"#af1",id:0}),this.marcadorNivel=new n(this,{x:Math.floor(t/2),y:-99,size:40,txt:" Level: ",color:"#ff5",strokeColor:"#16d",id:1}),this.marcadorHi=new n(this,{x:Math.floor(t/1.2),y:-99,size:40,txt:" Record: ",color:"#fff",strokeColor:"#af1",id:2}),this.botonfullscreen=new b(this,{x:Math.floor(1.3*t),y:-92,id:"boton-fullscreen",orX:0,orY:0,scX:1.2,scY:.8,ang:0})}instanciar_mobileControls(){const t=-1e3,e=[128,128],a=20;this.crucetaup=new w(this,{x:e[0]+a,y:t,id:"cruceta-up",orX:.5,orY:.5,scX:1,scY:1,ang:0,alpha:.8,texto:""}),this.crucetado=new w(this,{x:e[0]+a,y:t+e[1]+a,id:"cruceta-do",orX:.5,orY:.5,scX:1,scY:1,ang:180,alpha:.8,texto:""}),this.crucetale=new w(this,{x:0,y:t+e[1]+a,id:"cruceta-le",orX:.5,orY:.5,scX:1,scY:1,ang:270,alpha:.8,texto:""}),this.crucetari=new w(this,{x:2*(e[0]+a),y:t+e[1]+a,id:"cruceta-ri",orX:.5,orY:.5,scX:1,scY:1,ang:90,alpha:.8,texto:""})}set_sonidos(){this.sonido_preparado=this.sound.add("pacman-inicio-nivel"),g(this.sonido_preparado,!1,.7),this.sonido_youWin=this.sound.add("you-win"),this.sonido_key=this.sound.add("key"),this.sonido_numkey=this.sound.add("numkey"),this.sonido_waka=this.sound.add("pacman-waka")}}class X{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{left:t,top:e,addLeft:a,orX:s,orY:r,frame:n,scale:c,txtSize:l,texto:h,id:d}=this.args;this.radiobutton=this.relatedScene.add.sprite(t,e,"radio-buttons").setInteractive(),this.radiobutton.setOrigin(s,r).setScale(c).setDepth(i.depth.textos).setFrame(n),this.radiobutton.setData("id",d),this.txt=new o(this.relatedScene,{x:t+60+a,y:e,txt:h,size:l,color:"#ffa",style:"bold",stroke:"#fa1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[s,r],elastic:!1,dura:0}),this.txt.create(),this.radiobutton.on("pointerover",(()=>{this.txt.get().setScale(c+.1),this.radiobutton.setScale(c+.1)})),this.radiobutton.on("pointerout",(()=>{this.txt.get().setScale(c),this.radiobutton.setScale(c)})),this.radiobutton.on("pointerdown",(t=>{d.includes("FPS")?this.relatedScene.radioFps.forEach((t=>t.get().setFrame(0))):this.relatedScene.radiobuttons.forEach((t=>t.get().setFrame(0))),this.radiobutton.setFrame(1),d.includes("FPS")?i.isFps60()?i.setFps60(!1):i.setFps60(!0):(Object.keys(i.controlElegido).forEach((t=>{i.controlElegido[t]=!1})),i.controlElegido[this.radiobutton.getData("id")]=!0,console.log(i.controlElegido.mobile,i.controlElegido.keyboard)),console.log(i.isFps60())}))}get(){return this.radiobutton}}class D extends a.Scene{constructor(){super("PreGame")}init(){i.setPuntos(0),i.setNivel(1),i.setVidas(3),i.setGameOver(!1),i.setNivelSuperado(!1),i.controlElegido.mobile=!1,i.controlElegido.keyboard=!0,this.botoninicio=new S(this,{left:Math.floor(this.sys.game.config.width/2),top:Math.floor(this.sys.game.config.height/1.3),id:"boton-nueva-partida",scX:.6,scY:.5,angle:1,originX:.5,originY:.5,texto:" Start ",nextScene:"Game"}),this.radiobuttons=[],this.radiobuttons.push(new X(this,{left:Math.floor(this.sys.game.config.width/15),top:Math.floor(this.sys.game.config.height/6),addLeft:0,orX:0,orY:.5,frame:1,scale:1,txtSize:50,texto:" Keyboard cursors ",id:"keyboard"})),this.radiobuttons.push(new X(this,{left:Math.floor(this.sys.game.config.width/15),top:Math.floor(this.sys.game.config.height/3.2),addLeft:0,orX:0,orY:.5,frame:0,scale:1,txtSize:50,texto:" Mobile controls ",id:"mobile"})),this.radioFps=[],this.radioFps.push(new X(this,{left:Math.floor(this.sys.game.config.width/10),top:Math.floor(this.sys.game.config.height/1.8),addLeft:52,orX:.5,orY:.5,frame:0,scale:.9,txtSize:40,texto:"30FPS",id:"30FPS"})),this.radioFps.push(new X(this,{left:Math.floor(this.sys.game.config.width/1.6),top:Math.floor(this.sys.game.config.height/1.8),addLeft:52,orX:.5,orY:.5,frame:1,scale:.9,txtSize:40,texto:"60 FPS",id:"60FPS"}))}create(){this.add.image(0,0,"fondo-pacman").setDepth(i.depth.fondo).setOrigin(0,0),this.radiobuttons.forEach((t=>t.create())),this.radioFps.forEach((t=>t.create())),this.botoninicio.create("Game",!1)}}class Y extends a.Scene{constructor(){super("MainMenu")}init(){this.intermision=this.sound.add("pacman-intermision"),this.botoninicio=new S(this,{left:Math.floor(this.sys.game.config.width/2),top:Math.floor(this.sys.game.config.height/1.3),id:"boton-nueva-partida",scX:.6,scY:.5,angle:1,originX:.5,originY:.5,texto:" New Game ",nextScene:"PreGame"}),this.txt=new o(this,{x:Math.floor(this.sys.game.config.width/2),y:0,txt:" PacClon ",size:120,color:"#ffa",style:"bold",stroke:"#fa1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:Math.floor(this.sys.game.config.height/4),dura:3e3})}preload(){}create(){this.add.image(0,0,"fondo-pacman").setOrigin(0,0).setDepth(i.depth.fondo),this.txt.create(),this.add.text(Math.floor(this.sys.game.config.width/3.6),Math.floor(this.sys.game.config.height/1.04),"Based on classic arcade game Pacman of 1980",{fontSize:"16px",color:"#9ff",align:"justify",fontFamily:"Arial"}),this.add.timeline([{at:1800,run:()=>{this.botoninicio.create("PreGame",!1)}}]).play(),g(this.intermision,!1,.6),console.log(this.txt)}update(){}}class _ extends a.Scene{constructor(){super("Preloader")}init(){const t=this.sys.game.config.width,e=this.sys.game.config.height;this.load.image("fondo","assets/img/bg.png"),this.add.image(0,0,"fondo").setOrigin(0,0),this.txt=new o(this,{x:Math.floor(t/2),y:Math.floor(e/3.5),txt:" Loading...",size:55,color:"#ffa",style:"bold",stroke:"#f91",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.add.rectangle(Math.floor(t/2),Math.floor(e/2),Math.floor(t/1.5),Math.floor(e/12)).setStrokeStyle(1,16772744);const a=this.add.rectangle(Math.floor(t/2)-Math.floor(t/3)+4,Math.floor(e/2),4,Math.floor(e/14),16750865);this.load.on("progress",(e=>{a.width=Math.floor(t/1.52)*e}))}preload(){this.load.setPath("assets"),this.load.image("fondo-pacman","./img/fondo_pacmanPh.png"),this.load.image("boton-nueva-partida","./img/ui-newgame.png"),this.load.image("boton-fire-joystick","./img/ui-1.png"),this.load.image("cruceta","./img/cruceta-up.png"),this.load.spritesheet("radio-buttons","./img/radio-buttons-ssheet.png",{frameWidth:50,frameHeight:50}),this.load.spritesheet("boton-fullscreen","./img/boton-fullscreen.png",{frameWidth:64,frameHeight:64}),this.load.image("particula1","./img/particula1.png"),this.load.spritesheet("laberinto-1","./img/atlas-pacman.png",{frameWidth:228,frameHeight:248}),this.load.spritesheet("tile-map-ssheet","./img/tilemap-pacman.png",{frameWidth:16,frameHeight:16}),this.load.image("puntito","./img/puntito.png"),this.load.image("tile-pacman-marron","./img/tile_pacmanMarron.png"),this.load.spritesheet("pacman","./img/pac-animasPh.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("frutas","./img/frutas-ssheet.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("fantasmas","./img/fantasmas-ssheet.png",{frameWidth:16,frameHeight:16});for(let t=0;t<4;t++)this.load.spritesheet(`fantanim0${t}`,`./img/fantanim0${t}.png`,{frameWidth:16,frameHeight:16}),this.load.spritesheet(`fantanim1${t}`,`./img/fantanim1${t}.png`,{frameWidth:16,frameHeight:16}),this.load.spritesheet(`fantanim2${t}`,`./img/fantanim2${t}.png`,{frameWidth:16,frameHeight:16}),this.load.spritesheet(`fantanim3${t}`,`./img/fantanim3${t}.png`,{frameWidth:16,frameHeight:16});this.load.audio("gameover-retro","./audio/gameoveretro.ogg"),this.load.audio("you-win","./audio/you-win.mp3"),this.load.audio("key","./audio/key.wav"),this.load.audio("numkey","./audio/numkey.wav"),this.load.audio("pacman-azules","./audio/pacmanazules.ogg"),this.load.audio("pacman-dies","./audio/pacmandies.ogg"),this.load.audio("pacman-eating-cherry","./audio/pacmaneatingcherry.mp3"),this.load.audio("pacman-eating-ghost","./audio/pacmaneatinghost.ogg"),this.load.audio("pacman-inicio-nivel","./audio/pacmaninicionivel.ogg"),this.load.audio("pacman-intermision","./audio/pacmanintermision.ogg"),this.load.audio("pacman-sirena","./audio/pacmansirena.ogg"),this.load.audio("pacman-waka","./audio/pacmanwakawaka.mp3")}create(){this.scene.start("MainMenu")}}const M={type:Phaser.AUTO,width:864,height:704,parent:"game-container",backgroundColor:"#870",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:!1}},pixelArt:!0,scene:[r,_,Y,D,v]};new Phaser.Game(M);
